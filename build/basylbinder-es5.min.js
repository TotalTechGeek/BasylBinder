/*! 
 * BasylBinder
 * 
 * Copyright 2018, Jesse Daniel Mitchell
 * Released under the MIT license.
 *
 * Date: 2018-04-22T22:35:32.502Z
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};if("undefined"==typeof window.$$)$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return a instanceof Event?$$.from(a.target):a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a))?$$.from(a):void 0});else{var z=window.$$;$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a,b){return a instanceof Event?$$.from(a.target):a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a))?$$.from(a):z(a,b)})}function createBasylBinder(b){function c(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function a(a){var b=document.createElement("template");return a=a.trim(),b.innerHTML=a,b.content.firstChild}function d(a,c){a.value=c(a.value);var d=a.onchange||H;return a.onchange=function(b){b.target.value=c(b.target.value),d(b),a.oninput&&a.oninput(b)},b}function e(a,c,d,e){var f=b.bindings[a][0]().count(),g=function(){return b.bindings[a][0]().get(f)},h=function(c){b.bindings[a][0]().set(c,f),b.update(a)};if("undefined"!=typeof c.attributes["bind-index"])f=c.getAttribute("bind-index"),"undefined"==typeof g()&&h("");else{for(;"undefined"!=typeof g();)f++;c.setAttribute("bind-index",f),h("")}if(!e){var j=function e(){if(c[d]=g(),!c.parentNode){var f=b.bindings[a][2].indexOf(e);b.bindings[a][2].splice(f,1)}};b.bindings[a][2].push(j),c[d]=g()}i(a,c,d,g,h)}function f(a,c,d,e){e||(b.bindings[a][2].push([c,d]),c[d]=b.bindings[a][0]()),i(a,c,d,function(){return b.get(a)},function(c){return b.set(a,c)})}function g(a,c,d,e,f,g){if("undefined"==typeof b.bindings[c])return void delete d.oninput;if(f()!=a.target[e])if((d instanceof HTMLTextAreaElement||d instanceof HTMLInputElement)&&-1!==["text","url","password","telephone","search",""].indexOf((d.getAttribute("type")||"").toLowerCase().trim())){var h=d.selectionStart,i=d.selectionEnd;g(a.target[e]),d.setSelectionRange(h,i)}else g(a.target[e])}function h(a,c,d,e,f,g){return"undefined"==typeof b.bindings[c]?void delete d.oninput:void(f()!=a.target[e]&&(d.hasAttribute("on-true")&&!0==a.target[e]?g(d.getAttribute("on-true")):d.hasAttribute("on-false")&&!1==a.target[e]?g(d.getAttribute("on-false")):g(a.target[e])))}function i(a,b,c,d,f){(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement||b.hasAttribute("contenteditable")||b instanceof HTMLSelectElement)&&(b.attributes.type&&("checkbox"===b.getAttribute("type")||"file"===b.getAttribute("type"))||b instanceof HTMLSelectElement?b.onchange=function(g){return h(g,a,b,c,d,f)}:b.oninput=function(h){return g(h,a,b,c,d,f)})}function j(a,c,d,g){return g="undefined"!=typeof g&&g,a=k(c,a),"undefined"!=typeof b.bindings[a]&&"undefined"!=typeof c&&(4==b.bindings[a].length&&"Array"==b.bindings[a][3]?e(a,c,d,g):f(a,c,d,g)),b}function k(a,c){c=c.toLowerCase();var d;return(d=b.closest(a,c))?d.getAttribute(B).toLowerCase()+":"+c:"undefined"==typeof b.bindings[c]?null:c}function l(){return Math.random().toString(36).substring(2)}function m(a){var b={};return b.bind=function(c,d){return j(c,a,"value",d),b},b.format=function(c){return d(a,c),b},b}function n(a){var b=new DOMParser().parseFromString(a,"text/html");return b.documentElement.textContent}function o(a){var b={};return b.bind=function(c,d,e){return j(c,a,d,e),b},b}function p(a){b.from("*"+a+"["+B+"]").for(function(a){""===a.getAttribute(B)&&a.setAttribute(B,l())})}function q(a){b.from("*"+a+"basyl-style,script[type=\"basyl-style\"]").for(function(c){var d=document.createElement("style");d.innerHTML=c.innerHTML,c.parentNode.replaceChild(d,c),b.from(d).watch("-html")})}function r(a){function c(c,d){b.from("*"+a+c).for(function(a){b.from(a.attributes).for(function(c){return b.from(a)[d](c.name,c.value)}),a.parentNode.removeChild(a)})}return p(a),c(C,"var"),c(G,"const"),c(E,"dvar"),b.from("*"+a+F).for(function(a){b.from(a.attributes).for(function(a){return b.pvar(a.name,a.value)}),a.parentNode.removeChild(a)}),b}function s(a){b.from("*"+a+"component[make]").for(function(a){b.components[a.getAttribute("type")]=[a.innerHTML],a.parentNode.removeChild(a)})}function t(a){b.from("*"+a+"component[from]").for(function(a){var c=a.getAttribute("type");a.setAttribute("was-from",!0),a.removeAttribute("from"),a.setAttribute("watch","html");var d=a.querySelectorAll(C+","+G);a.innerHTML=b.components[c][0],b.from(d).for(function(b){return a.appendChild(b)}),d.length&&a.setAttribute("local-bind","")})}function u(a){return"undefined"==typeof a?"":a+" "}function v(a){b.from("*"+a+"[basyl-if]:not(basyl-if-watched)").for(function(a){var c,d=a.getAttribute("basyl-if"),e=function(a){return a};-1!=(c=d.indexOf("|"))&&(e=new Function(d.substring(0,c),"return "+d.substring(c+1)),d=d.substring(0,c));var f=a.style.display;d=k(a,d),b.bind(d,function(){a.style.display=e(b.get(d))?f:"none"}),a.style.display=e(b.get(d))?f:"none",a.setAttribute("basyl-if-watched",d),a.removeAttribute("basyl-if")})}function w(a){b.from("*"+a+D).for(function(a){new Function("me",a.textContent)(a),a.parentNode.removeChild(a)})}function x(a){b.from("*"+a+"[watch]:not([watched])").for(function(a){var c=a.getAttribute("watch").split(" ");b.from(c).for(function(c){b.from(a).watch(c)}),a.setAttribute("watched",a.getAttribute("watch").toLowerCase()),a.removeAttribute("watch")})}function y(a,c){c="undefined"==typeof c?0:c,b.from("*"+a+"[bind]:not([bound])").for(function(d){var e=k(d,d.getAttribute("bind"));if("undefined"==typeof b.bindings[e])return c++,void(4>c&&setTimeout(function(){return y(a,c)},200*c));var f,g="undefined"!=typeof d.attributes["one-way"];f="undefined"==typeof d.attributes["bind-to"]?d instanceof HTMLInputElement?"object"===_typeof(d.attributes.type)&&"checkbox"===d.getAttribute("type")?"checked":"value":d instanceof HTMLTextAreaElement||d instanceof HTMLSelectElement?"value":"textContent":d.getAttribute("bind-to"),d.setAttribute("bound",e),d.removeAttribute("bind"),j(e,d,f,g)})}b.bindings={},b.components={};var z={},A={},B="local-bind",C="vars",D="script[type=\"basyl-script\"]",E="dvars",F="pvars",G="svars";b.queueUpdate=function(a,c){"undefined"!=typeof A[a]&&clearTimeout(A[a]),A[a]=setTimeout(function(){b.update(a),delete A[a]},c)},b.make=function(c,d){var e="";return d&&(e="<vars ",Object.keys(d).forEach(function(a){e+=a.replace(/ /g,"")+"=\""+d[a]+"\""}),e+="></vars>"),{appendTo:function(d){var f=a("<component type=\""+c+"\" from>"+e+"</component>");return d.setAttribute("basyl-now",""),d.appendChild(f),b.all("[basyl-now]"),d.removeAttribute("basyl-now"),b.from(f)}}},b.bind=function(a,c){return r(" "),a=a.toLowerCase(),"string"==typeof c&&(c=c.toLowerCase()),"undefined"!=typeof b.bindings[a]&&b.bindings[a][2].push(c),b},b.forget=function(a){return a=a.toLowerCase(),delete b.bindings[a],b};var H=function(){};b.create=function(a,c,d){return a=a.toLowerCase(),c=c||H,d=d||H,z[a]=!1,b.bindings[a]=[c,d,[]],b},b.createView=function(a,c,d){return a=a.toLowerCase(),c=c.toLowerCase(),"undefined"==typeof b.bindings[a]&&r(" "),b.create(c,function(){return d(b.get(a))}),b.bind(a,c),b},b.update=function(a){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a]){if(z[a])return b;z[a]=!0,b.bindings[a][2].forEach(function(c){"string"==typeof c?b.update(c):"function"==typeof c?c(b.get(a)):c[0][c[1]]=b.bindings[a][0]()}),z[a]=!1}return b},b.dget=function(a){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a])return b.get(a).arr},b.get=function(a){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a])return b.bindings[a][0]()},b.set=function(a,c){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a]){if(z[a])return;b.bindings[a][1]&&(b.bindings[a][1](c),b.update(a))}return b},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),b.closest=function(a,c,d){d="undefined"==typeof d?"["+B+"]":d;for(var e=null;a;){if(a.matches(d)&&("undefined"==typeof c||""===c||"undefined"!=typeof b.bindings[a.getAttribute(B).toLowerCase()+":"+c.toLowerCase()])){e=a;break}a=a.parentElement}return e},b.from=function(d){function a(){for(var a=0,b=0,c=0;c<d.length;c++)d[c].length>a&&(a=d[c].length,b=c);return[b,a]}if("string"==typeof d){var e=d.substring(1),f=d[0];if("#"==f)return b.from(document.getElementById(d));if("*"==f)return b.from(document.querySelectorAll(e));if("$"==f)return b.from(document.querySelector(e));if("&"==f)return b.from(b.search(e));if("@"==f)return b.from(b.search(e).map(b.get))}var g={};if(d instanceof HTMLElement){var h=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},i=function(a,b,c){return c.indexOf(a)===b},j=function(e){return function(){var f;if(f=b.closest(d)){f=f.getAttribute(B);var h=c(arguments);return h[0]=f+":"+h[0],e.apply(null,h)}return e.apply(null,arguments),g}};return g=d instanceof HTMLInputElement?m(d):o(d),g.var=j(b.var),g.const=j(b.const),g.dvar=j(b.dvar),g.bind=j(b.bind),g.watch=function(a){var c=a,e=!1,f=!1;("html"==a||"text"==a)&&(a="innerHTML",f=e=!0),"*"==a.charAt(0)&&(a=a.substring(1),f=e=!0),"innerHTML"===a&&(d instanceof HTMLStyleElement||d instanceof HTMLScriptElement)&&(e=!1);var g=f?d[a]:d.getAttribute(a)||"";var m=(g.toString().match(/\{\{[A-Za-z0-9\-_#]+(\|[^}]+(\}[^}]+)?)*\}\}/g)||[]).map(function(a){var b=a.substring(2,a.length-2).split("|"),c=b[0];return b[0]="",[c.toLowerCase(),b.join("|").substring(1),h(a)]});m=m.filter(function(a){return k(d,a[0])}).filter(i);var j=m.map(function(a){return new RegExp(a[2],"g")}),o=function(){var h=g.toString();e?b.from(d.childNodes).for(function(a){a instanceof HTMLElement?(b.from(a).watch(c),b.from(a.attributes).for(function(c){j.some(function(a){return c.value.match(a)})&&b.from(a).watch(c.name)})):a instanceof Text&&(h=a.data,""!==h.trim()&&(j.forEach(function(a,e){var f=k(d,m[e][0]);""!==m[e][1]&&(f=l()+l(),b.createView(m[e][0],f,new Function(m[e][0],"return "+n(m[e][1]))));var g="*innerHTML"==c||"html"==c?"bind-to=\"innerHTML\"":"";h=h.replace(a,"<v bind=\""+f+"\""+g+"></v>")}),a.parentNode.replaceChild(new DOMParser().parseFromString("<v>"+h+"</v>","text/html").childNodes[0].childNodes[1].childNodes[0],a)))}):(j.forEach(function(a,c){if(""!==m[c][1]){var e=new Function(m[c][0],"return "+m[c][1]);h=h.replace(a,e(b(d).get(m[c][0])))}else h=h.replace(a,b(d).get(m[c][0]))}),f?d[a]=h:d.setAttribute(a,h))};m.forEach(function(a){e||b.bind(k(d,a[0]),o)}),o()},g.get=function(a){return b.get(k(d,a))},g.set=function(a,c){return b.set(k(d,a),c),g},g}return Array.isArray(d)?(g.do=function(a){return d.map(a)},g.for=function(a){return d.forEach(a)}):(g.for=function(a){for(var b=0;b<d.length;b++)a(d[b],b)},g.do=function(a){for(var b=[],c=0;c<d.length;c++)b.push(a(d[c],c));return b}),g.filter=function(a){g._arrayFix();for(var b=0;b<d.length;b++)a(d[b])||d.splice(b,1);return g},g.release=function(){return d},g.toArray=function(){return d=c(d)},g._arrayFix=function(){return!Array.isArray(d)&&g.toArray()},g.transform=function(a){g._arrayFix();for(var b=0;b<d.length;b++)d[b]=a(d[b],b);return g},g.transpose=function(){var b=a()[0];return function(a,b){return d[b].map(function(a,b){return d.map(function(a){return a[b]})})}(d,b)},g.sum=function(){return g._arrayFix(),d.concat([0]).reduce(function(a,b){return parseFloat(b)+parseFloat(a)||0})},g.ffor=function(a,b){for(var c=0;c<d.length;c++)b(d[c])&&a(d[c],c)},g.table=function(b){function c(a,b){return"<"+b+">"+a+"</"+b+">"}b||(b={}),"undefined"==typeof b.fill&&(b.fill=""),"undefined"==typeof b.head&&(b.head=[]);for(var e=a()[1],f=0;f<d.length;f++)for(;d[f].length<e;)d[f].push("");var g=c(d.map(function(a){return c(a.map(function(a){return c(a||b.fill,"td")}).join(""),"tr")}).join(""),"tbody"),h="";return b.head.length&&(h=c(c(b.head.map(function(a){return c(a,"th")}).join(""),"tr"),"thead")),c(h+g,"table")},g.fdo=function(a,b){for(var c,e=[],f=0;f<d.length;f++)c=b(d[f])?a(d[f],f):null,void 0!==c&&null!==c&&e.push(c);return e},g},b.templates={getInt:function(a){return parseInt(a.val)||0},getPosInt:function(a){var b=parseInt(a.val);return 0>b?-b:b||0},getFloat:function(a){return parseFloat(a.val)||0},getAny:function(a){return"undefined"==typeof a.val?"":a.val},setInt:function(a,b){return a.val=parseInt(b)},setFloat:function(a,b){return a.val=parseFloat(b)},setAny:function(a,b){return a.val=b}},b._CV=function(a,c,d){var e={val:"undefined"==typeof a?"":a},f=c?c:b.templates.getAny,g=d?d:b.templates.setAny;return e.set=function(a){return g(e,a)},e.get=function(){return f(e)},e},b.dvar=function(a){a=a.toLowerCase();var c={arr:[]},d=function(a,b,c){return a.arr[c]=b},e=function(a,b){return a.arr[b]};return c.set=function(a,b){return d(c,a,b)},c.get=function(a){return e(c,a)},c.count=function(){return c.arr.length},b.create(a,function(){return c}),b.bindings[a].push("Array"),b},b.search=function(a){return Object.keys(b.bindings).filter(function(b){return b.match(a)})},b.const=function(a,c){return b.create(a,function(){return c})},b.pvar=function(a,c){var d="bb_"+a;localStorage[d]||(localStorage[d]=c);return b.create(a,function(){return localStorage[d]},function(a){localStorage[d]=a}),b},b.var=function(c,d,e,f){var g=new b._CV(d,e,f);return b.create(c,g.get,g.set),b},b.range=function(a,b){return c(Array(b-a+1).keys()).map(function(b){return b+a})},b.all=function(a){a=u(a),q(a),s(a),t(a),r(a),w(a),x(a),y(a),v(a)}}createBasylBinder($$),addEventListener("load",function(){return $$.all()});

/*! 
 * BasylBinder
 * 
 * Copyright 2018, Jesse Daniel Mitchell
 * Released under the MIT license.
 *
 * Date: 2018-04-22T22:35:32.502Z
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};if("undefined"==typeof window.$$)$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return a instanceof Event?$$.from(a.target):a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a))?$$.from(a):void 0});else{var z=window.$$;$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a,b){return a instanceof Event?$$.from(a.target):a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a))?$$.from(a):z(a,b)})}function createBasylBinder(b){function c(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function a(a){a=a.trim();var b;return!window.ActiveXObject&&"ActiveXObject"in window?(b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]):(b=document.createElement("template"),b.innerHTML=a,b.content.firstChild)}function d(a,c){a.value=c(a.value);var d=a.onchange||D;return a.onchange=function(b){b.target.value=c(b.target.value),d(b),a.oninput&&a.oninput(b)},b}function e(a,c,d,e){e||(b.bindings[a][2].push([c,d]),c[d]=b.bindings[a][0]()),h(a,c,d,function(){return b.get(a)},function(c){return b.set(a,c)})}function f(a,c,d,e,f,g){if("undefined"==typeof b.bindings[c])return void delete d.oninput;if(f()!=a.target[e])if((d instanceof HTMLTextAreaElement||d instanceof HTMLInputElement)&&-1!==["text","url","password","telephone","search",""].indexOf((d.getAttribute("type")||"").toLowerCase().trim())){var h=d.selectionStart,i=d.selectionEnd;g(a.target[e]),d.setSelectionRange(h,i)}else g(a.target[e])}function g(a,c,d,e,f,g){return"undefined"==typeof b.bindings[c]?void delete d.oninput:void(f()!=a.target[e]&&(d.hasAttribute("on-true")&&!0==a.target[e]?g(d.getAttribute("on-true")):d.hasAttribute("on-false")&&!1==a.target[e]?g(d.getAttribute("on-false")):g(a.target[e])))}function h(a,b,c,d,h){(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement||b.hasAttribute("contenteditable")||b instanceof HTMLSelectElement)&&(b.attributes.type&&("checkbox"===b.getAttribute("type")||"file"===b.getAttribute("type"))||b instanceof HTMLSelectElement?b.onchange=function(f){return g(f,a,b,c,d,h)}:b.oninput=function(g){return f(g,a,b,c,d,h)})}function i(a,c,d,f){return f="undefined"!=typeof f&&f,a=k(c,a),"undefined"!=typeof b.bindings[a]&&"undefined"!=typeof c&&e(a,c,d,f),b}function k(a,c){c=c.toLowerCase();var d;return(d=b.closest(a,c))?d.getAttribute(z).toLowerCase()+":"+c:"undefined"==typeof b.bindings[c]?null:c}function l(){return Math.random().toString(36).substring(2)}function m(a){var b=new DOMParser().parseFromString(a,"text/html");return b.documentElement.textContent}function j(a){b.from("*"+a+"["+z+"]").for(function(a){""===a.getAttribute(z)&&a.setAttribute(z,l())})}function n(a){b.from("*"+a+"basyl-style,script[type=\"basyl-style\"]").for(function(c){var d=document.createElement("style");d.innerHTML=c.innerHTML,c.parentNode.replaceChild(d,c),b.from(d).watch("-html")})}function o(a){function c(c,d){b.from("*"+a+c).for(function(a){b.from(a.attributes).for(function(c){return b.from(a)[d](c.name,c.value)}),a.parentNode.removeChild(a)})}return j(a),c(A,"var"),c(C,"const"),b.from("*"+a+B).for(function(a){b.from(a.attributes).for(function(a){return b.pvar(a.name,a.value)}),a.parentNode.removeChild(a)}),b}function p(a){b.from("*"+a+"component[make]").for(function(a){b.components[a.getAttribute("type")]=[a.innerHTML],a.parentNode.removeChild(a)})}function q(a){b.from("*"+a+"component[from]").for(function(a){var c=a.getAttribute("type");a.setAttribute("was-from",!0),a.removeAttribute("from"),a.setAttribute("watch","html");var d=a.querySelectorAll(A+","+C);a.innerHTML=b.components[c][0],b.from(d).for(function(b){return a.appendChild(b)}),d.length&&a.setAttribute("local-bind","")})}function r(a){return"undefined"==typeof a?"":a+" "}function s(a){b.from("*"+a+"[basyl-if]:not(basyl-if-watched)").for(function(a){var c,d=a.getAttribute("basyl-if"),e=function(a){return a};-1!=(c=d.indexOf("|"))&&(e=new Function(d.substring(0,c),"return "+d.substring(c+1)),d=d.substring(0,c));var f=a.style.display;d=k(a,d),b.bind(d,function(){a.style.display=e(b.get(d))?f:"none"}),a.style.display=e(b.get(d))?f:"none",a.setAttribute("basyl-if-watched",d),a.removeAttribute("basyl-if")})}function t(a){b.from("*"+a+y).for(function(a){new Function("me",a.textContent)(b.from(a)),a.innerHTML=""})}function u(a){b.from("*"+a+"[watch]:not([watched])").for(function(a){var c=a.getAttribute("watch").split(" ");b.from(c).for(function(c){b.from(a).watch(c)}),a.setAttribute("watched",a.getAttribute("watch").toLowerCase()),a.removeAttribute("watch")})}function v(a,c){c="undefined"==typeof c?0:c,b.from("*"+a+"[bind]:not([bound])").for(function(d){var e=k(d,d.getAttribute("bind"));if("undefined"==typeof b.bindings[e])return c++,void(4>c&&setTimeout(function(){return v(a,c)},200*c));var f,g="undefined"!=typeof d.attributes["one-way"];f="undefined"==typeof d.attributes["bind-to"]?d instanceof HTMLInputElement?"object"===_typeof(d.attributes.type)&&"checkbox"===d.getAttribute("type")?"checked":"value":d instanceof HTMLTextAreaElement||d instanceof HTMLSelectElement?"value":"textContent":d.getAttribute("bind-to"),d.setAttribute("bound",e),d.removeAttribute("bind"),i(e,d,f,g)})}b.bindings={},b.components={};var w={},x={},z="local-bind",A="vars",y="script[type=\"basyl-script\"]",B="pvars",C="svars";b.queueUpdate=function(a,c){"undefined"!=typeof x[a]&&clearTimeout(x[a]),x[a]=setTimeout(function(){b.update(a),delete x[a]},c)},b.make=function(c,d){var e="";return d&&(e="<vars ",Object.keys(d).forEach(function(a){e+=a.replace(/ /g,"")+"=\""+d[a]+"\""}),e+="></vars>"),{appendTo:function(d){var f=a("<component type=\""+c+"\" from>"+e+"</component>");return d.setAttribute("basyl-now",""),d.appendChild(f),b.all("[basyl-now]"),d.removeAttribute("basyl-now"),b.from(f)}}},b.bind=function(a,c){return o(" "),a=a.toLowerCase(),"string"==typeof c&&(c=c.toLowerCase()),"undefined"!=typeof b.bindings[a]&&b.bindings[a][2].push(c),b},b.forget=function(a){return a=a.toLowerCase(),delete b.bindings[a],b};var D=function(){};b.create=function(a,c,d){return a=a.toLowerCase(),c=c||D,d=d||D,w[a]=!1,b.bindings[a]=[c,d,[]],b},b.createView=function(a,c,d){return a=a.toLowerCase(),c=c.toLowerCase(),"undefined"==typeof b.bindings[a]&&o(" "),b.create(c,function(){return d(b.get(a))}),b.bind(a,c),b},b.update=function(a){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a]){if(w[a])return b;w[a]=!0,b.bindings[a][2].forEach(function(c){"string"==typeof c?b.update(c):"function"==typeof c?c(b.get(a)):c[0][c[1]]=b.bindings[a][0]()}),w[a]=!1}return b},b.get=function(a){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a])return b.bindings[a][0]()},b.set=function(a,c){if(a=a.toLowerCase(),"undefined"!=typeof b.bindings[a]){if(w[a])return;b.bindings[a][1]&&(b.bindings[a][1](c),b.update(a))}return b},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),b.closest=function(a,c,d){d="undefined"==typeof d?"["+z+"]":d;for(var e=null;a;){if(a.matches(d)&&("undefined"==typeof c||""===c||"undefined"!=typeof b.bindings[a.getAttribute(z).toLowerCase()+":"+c.toLowerCase()])){e=a;break}a=a.parentElement}return e},b.from=function(e){function a(){for(var a=0,b=0,c=0;c<e.length;c++)e[c].length>a&&(a=e[c].length,b=c);return[b,a]}if("string"==typeof e){var f=e.substring(1),g=e[0];if("#"==g)return b.from(document.getElementById(e));if("*"==g)return b.from(document.querySelectorAll(f));if("$"==g)return b.from(document.querySelector(f));if("&"==g)return b.from(b.search(f));if("@"==g)return b.from(b.search(f).map(b.get))}var h={release:function(){return e}};if(e instanceof HTMLElement){var j=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},n=function(a,b,c){return c.indexOf(a)===b},o=function(d,f){return function(){var g;if(g=b.closest(e)){g=g.getAttribute(z);var j=c(arguments);return f.forEach(function(a){return j[a]=g+":"+j[a]}),d.apply(null,j)}return d.apply(null,arguments),h}};return e instanceof HTMLInputElement?(h.bind=function(a,b){return i(a,e,"value",b),h},h.format=function(a){return d(e,a),h}):h.bind=function(a,b,c){return i(a,e,b,c),h},h.create=o(b.create,[0]),h.var=o(b.var,[0]),h.const=o(b.const,[0]),h.bind=o(b.bind,[0]),h.createView=o(b.createView,[0,1]),h.watch=function(a){var c=a,d=!1,f=!1;("html"==a||"text"==a)&&(a="innerHTML",f=d=!0),"*"==a.charAt(0)&&(a=a.substring(1),f=d=!0),"innerHTML"===a&&(e instanceof HTMLStyleElement||e instanceof HTMLScriptElement)&&(d=!1);var g=f?e[a]:e.getAttribute(a)||"";var h=(g.toString().match(/\{\{[A-Za-z0-9\-_#]+(\|[^}]+(\}[^}]+)?)*\}\}/g)||[]).map(function(a){var b=a.substring(2,a.length-2).split("|"),c=b[0];return b[0]="",[c.toLowerCase(),b.join("|").substring(1),j(a)]});h=h.filter(function(a){return k(e,a[0])}).filter(n);var o=h.map(function(a){return new RegExp(a[2],"g")}),p=function(){var n=g.toString();d?b.from(e.childNodes).for(function(a){a instanceof HTMLElement?(b.from(a).watch(c),b.from(a.attributes).for(function(c){o.some(function(a){return c.value.match(a)})&&b.from(a).watch(c.name)})):a instanceof Text&&(n=a.data,""!==n.trim()&&(o.forEach(function(a,d){var f=k(e,h[d][0]);""!==h[d][1]&&(f=l()+l(),b.createView(h[d][0],f,new Function(h[d][0],"return "+m(h[d][1]))));var g="*innerHTML"==c||"html"==c?"bind-to=\"innerHTML\"":"";n=n.replace(a,"<v bind=\""+f+"\""+g+"></v>")}),a.parentNode.replaceChild(new DOMParser().parseFromString("<v>"+n+"</v>","text/html").childNodes[0].childNodes[1].childNodes[0],a)))}):(o.forEach(function(a,c){if(""!==h[c][1]){var d=new Function(h[c][0],"return "+h[c][1]);n=n.replace(a,d(b(e).get(h[c][0])))}else n=n.replace(a,b(e).get(h[c][0]))}),f?e[a]=n:e.setAttribute(a,n))};h.forEach(function(a){d||b.bind(k(e,a[0]),p)}),p()},h.get=function(a){return b.get(k(e,a))},h.update=function(a){return b.update(k(e,a)),h},h.set=function(a,c){return b.set(k(e,a),c),h},h}return Array.isArray(e)?(h.do=function(a){return e.map(a)},h.for=function(a){return e.forEach(a)}):(h.for=function(a){for(var b=0;b<e.length;b++)a(e[b],b)},h.do=function(a){for(var b=[],c=0;c<e.length;c++)b.push(a(e[c],c));return b}),h.filter=function(a){h._arrayFix();for(var b=0;b<e.length;b++)a(e[b])||(e.splice(b,1),b--);return h},h.toArray=function(){return e=c(e)},h._arrayFix=function(){return!Array.isArray(e)&&h.toArray()},h.transform=function(a){h._arrayFix();for(var b=0;b<e.length;b++)e[b]=a(e[b],b);return h},h.transpose=function(){var b=a()[0];return function(a,b){return e[b].map(function(a,b){return e.map(function(a){return a[b]})})}(e,b)},h.sum=function(){return h._arrayFix(),e.concat([0]).reduce(function(a,b){return parseFloat(b)+parseFloat(a)||0})},h.ffor=function(a,b){for(var c=0;c<e.length;c++)b(e[c])&&a(e[c],c)},h.table=function(b){function c(a,b){return"<"+b+">"+a+"</"+b+">"}b||(b={}),"undefined"==typeof b.fill&&(b.fill=""),"undefined"==typeof b.head&&(b.head=[]);for(var d=a()[1],f=0;f<e.length;f++)for(;e[f].length<d;)e[f].push("");var g=c(e.map(function(a){return c(a.map(function(a){return c(a||b.fill,"td")}).join(""),"tr")}).join(""),"tbody"),h="";return b.head.length&&(h=c(c(b.head.map(function(a){return c(a,"th")}).join(""),"tr"),"thead")),c(h+g,"table")},h.fdo=function(a,b){for(var c,d=[],f=0;f<e.length;f++)c=b(e[f])?a(e[f],f):null,void 0!==c&&null!==c&&d.push(c);return d},h},b.templates={getInt:function(a){return parseInt(a.val)||0},getPosInt:function(a){var b=parseInt(a.val);return 0>b?-b:b||0},getFloat:function(a){return parseFloat(a.val)||0},getAny:function(a){return"undefined"==typeof a.val?"":a.val},setInt:function(a,b){return a.val=parseInt(b)},setFloat:function(a,b){return a.val=parseFloat(b)},setAny:function(a,b){return a.val=b}},b._CV=function(a,c,d){var e={val:"undefined"==typeof a?"":a},f=c?c:b.templates.getAny,g=d?d:b.templates.setAny;return e.set=function(a){return g(e,a)},e.get=function(){return f(e)},e},b.search=function(a){return Object.keys(b.bindings).filter(function(b){return b.match(a)})},b.const=function(a,c){return b.create(a,function(){return c})},b.pvar=function(a,c){var d="bb_"+a;localStorage[d]||(localStorage[d]=c);return b.create(a,function(){return localStorage[d]},function(a){localStorage[d]=a}),b},b.var=function(c,d,e,f){var g=new b._CV(d,e,f);return b.create(c,g.get,g.set),b},b.range=function(a,b){return c(Array(b-a+1).keys()).map(function(b){return b+a})},b.all=function(a){a=r(a),n(a),p(a),q(a),o(a),t(a),u(a),v(a),s(a)}}createBasylBinder($$),addEventListener("load",function(){return $$.all()});

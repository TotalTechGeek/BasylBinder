/*! 
 * BasylBinder
 * 
 * Copyright 2018, Jesse Daniel Mitchell
 * Released under the MIT license.
 *
 * Date: 2018-04-22T22:35:32.502Z
 */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};if("undefined"==typeof window.$$)$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){if(a instanceof Event||a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a)))return $$.from(a)});else{var z=window.$$;$$=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a,b){return a instanceof Event||a instanceof HTMLElement||"object"===("undefined"==typeof a?"undefined":_typeof(a))?$$.from(a):z(a,b)})}function createBasylBinder(b){function c(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function a(a){a=a.trim();var b=document.createElement("template");return b.content?(b.innerHTML=a,b.content.firstChild):(b=document.createElement("div"),b.innerHTML=a,b.childNodes[0])}function d(a,c){a.value=c(a.value);var d=a.onchange||H;return a.onchange=function(b){b.target.value=c(b.target.value),d(b),a.oninput&&a.oninput(b)},b}function e(a,c,d,e){e||(w[a][2].push([c,d]),c[d]=w[a][0]()),h(a,c,d,function(){return b.get(a)},function(c){return b.set(a,c)})}function f(a,b,c,d,e,f){return"undefined"==typeof w[b]?void delete c.oninput:void(e()!=a.target[d]&&(A=a.target,f(a.target[d]),A=null))}function g(a,b,c,d,e,f){return"undefined"==typeof w[b]?void delete c.oninput:void(e()!=a.target[d]&&(A=a.target,c.hasAttribute("on-true")&&!0==a.target[d]?f(c.getAttribute("on-true")):c.hasAttribute("on-false")&&!1==a.target[d]?f(c.getAttribute("on-false")):f(a.target[d]),A=null))}function h(a,b,c,d,h){(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement||b.hasAttribute("contenteditable")||b instanceof HTMLSelectElement)&&(b.attributes.type&&("checkbox"===b.getAttribute("type")||"file"===b.getAttribute("type"))||b instanceof HTMLSelectElement?b.onchange=function(f){return g(f,a,b,c,d,h)}:b.oninput=function(g){return f(g,a,b,c,d,h)})}function i(a,c,d,f){return f="undefined"!=typeof f&&f,a=k(c,a),"undefined"!=typeof w[a]&&"undefined"!=typeof c&&e(a,c,d,f),b}function k(a,c){c=c.toLowerCase();var d;return(d=b.closest(a,c))?d.getAttribute(B).toLowerCase()+":"+c:"undefined"==typeof w[c]?null:c}function l(){return Math.random().toString(36).substring(2)}function m(a){var b=new DOMParser().parseFromString(a,"text/html");return b.documentElement.textContent}function j(a){b.from("*"+a+"["+B+"]").for(function(a){""===a.getAttribute(B)&&a.setAttribute(B,l())})}function n(a){b.from("*"+a+E).for(function(c){var d=document.createElement("style");d.innerHTML=c.innerHTML,c.parentNode.replaceChild(d,c),b.from(d).watch("html")})}function o(a){function c(c,d){b.from("*"+a+c).for(function(a){b.from(a.attributes).for(function(c){return b.from(a)[d](c.name,c.value)}),a.parentNode.removeChild(a)})}return j(a),c(C,"var"),c(G,"const"),b.from("*"+a+F).for(function(a){b.from(a.attributes).for(function(a){return b.pvar(a.name,a.value)}),a.parentNode.removeChild(a)}),b}function p(a){b.from("*"+a+"component[make]").for(function(a){x[a.getAttribute("type")]=[a.innerHTML],a.parentNode.removeChild(a)})}function q(a){b.from("*"+a+"component[from]").for(function(a){var c=a.getAttribute("type");a.setAttribute("was-from",!0),a.removeAttribute("from"),a.setAttribute("watch","html"),a.getAttribute("local-bind")||a.setAttribute("local-bind","");var d=a.querySelectorAll(C+","+G);a.innerHTML=x[c][0],b.from(d).for(function(b){return a.appendChild(b)})})}function r(a){return"undefined"==typeof a?"":a+" "}function s(a){b.from("*"+a+"[basyl-if]:not(basyl-if-watched)").for(function(a){var c,d=a.getAttribute("basyl-if"),e=function(a){return a};-1!=(c=d.indexOf("|"))&&(e=new Function(d.substring(0,c),"return "+d.substring(c+1)),d=d.substring(0,c));var f=a.style.display;d=k(a,d),b.bind(d,function(){a.style.display=e(b.get(d))?f:"none"}),a.style.display=e(b.get(d))?f:"none",a.setAttribute("basyl-if-watched",d),a.removeAttribute("basyl-if")})}function t(a){b.from("*"+a+D).for(function(a){new Function("me",a.textContent)(b.from(a)),a.innerHTML=""})}function u(a){b.from("*"+a+"[watch]:not([watched])").for(function(a){var c=a.getAttribute("watch").split(" ");b.from(c).for(function(c){b.from(a).watch(c)}),a.setAttribute("watched",a.getAttribute("watch").toLowerCase()),a.removeAttribute("watch")})}function v(a,c){c="undefined"==typeof c?0:c,b.from("*"+a+"[bind]:not([bound])").for(function(b){var d=k(b,b.getAttribute("bind"));if("undefined"==typeof w[d])return c++,void(4>c&&setTimeout(function(){return v(a,c)},200*c));var e,f="undefined"!=typeof b.attributes["one-way"];e="undefined"==typeof b.attributes["bind-to"]?b instanceof HTMLInputElement?"object"===_typeof(b.attributes.type)&&"checkbox"===b.getAttribute("type")?"checked":"value":b instanceof HTMLTextAreaElement||b instanceof HTMLSelectElement?"value":"textContent":b.getAttribute("bind-to"),b.setAttribute("bound",d),b.removeAttribute("bind"),i(d,b,e,f)})}var w={},x={},y={},z={},A=null,B="local-bind",C="vars",D="script[type=\"basyl-script\"]",E="script[type=\"basyl-style\"]",F="pvars",G="svars";b.bindings=function(){return w},b.components=function(){return x},b.queue=function(a,c){return"undefined"!=typeof z[a]&&clearTimeout(z[a]),z[a]=setTimeout(function(){b.update(a),delete z[a]},c),b},b.delay=function(a,c,d){return b.bind(a,function(){return b.queue(c,d)}),b},b.now=function(){return Object.keys(z).forEach(function(a){clearTimeout(z[a]),b.update(a),delete z[a]}),b},b.make=function(c,d){var e="basyl-now";return{appendTo:function(f){var g=a("<component local-bind=\""+l()+"\" type=\""+c+"\" from></component>");f.appendChild(g);var h=b.from(g);return d&&Object.keys(d).forEach(function(a){h.var(a,d[a])}),f.setAttribute(e,""),b.all("["+e+"]"),f.removeAttribute(e),h}}},b.bind=function(a,c){return o(" "),a=a.toLowerCase(),"string"==typeof c&&(c=c.toLowerCase()),"undefined"!=typeof w[a]&&w[a][2].push(c),b},b.forget=function(a){return a=a.toLowerCase(),delete w[a],b};var H=function(){};b.create=function(a,c,d){return a=a.toLowerCase(),c=c||H,d=d||H,y[a]=!1,w[a]=[c,d,[]],b},b.createView=function(a,c,d){return a=a.toLowerCase(),c=c.toLowerCase(),"undefined"==typeof w[a]&&o(" "),b.create(c,function(){return d(b.get(a))}),b.bind(a,c),b},b.update=function(a){if(a=a.toLowerCase(),"undefined"!=typeof w[a]){if(y[a])return b;y[a]=!0,w[a][2].forEach(function(c){"string"==typeof c?b.update(c):"function"==typeof c?c(b.get(a)):A==c[0]?c[0].onblur=function(){c[0][c[1]]=w[a][0](),delete c[0].onblur}:c[0][c[1]]=w[a][0]()}),y[a]=!1}return b},b.get=function(a){if(a=a.toLowerCase(),"undefined"!=typeof w[a])return w[a][0]()},b.set=function(a,c){if(a=a.toLowerCase(),"undefined"!=typeof w[a]){if(y[a])return;w[a][1]&&(w[a][1](c),b.update(a))}return b},Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),b.closest=function(a,b,c){c="undefined"==typeof c?"["+B+"]":c;for(var d=null;a;){if(a.matches(c)&&("undefined"==typeof b||""===b||"undefined"!=typeof w[a.getAttribute(B).toLowerCase()+":"+b.toLowerCase()])){d=a;break}a=a.parentElement}return d},b.from=function(e){function a(){for(var a=0,b=0,c=0;c<e.length;c++)e[c].length>a&&(a=e[c].length,b=c);return[b,a]}if("string"==typeof e){var f=e.substring(1),g=e[0];if("#"==g)return b.from(document.getElementById(f));if("*"==g)return b.from(document.querySelectorAll(f));if("$"==g)return b.from(document.querySelector(f));if("&"==g)return b.from(b.search(f));if("@"==g)return b.from(b.search(f).map(b.get))}var h={};if(h.release=function(){return e},e instanceof Event&&(e=e.target),e instanceof HTMLElement){var j=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},n=function(a,b,c){return c.indexOf(a)===b},o=function(d,f){return function(){var g;if(g=b.closest(e)){g=g.getAttribute(B);var j=c(arguments);return f.forEach(function(a){"string"==typeof j[a]&&("string"==typeof a?j[a]=k(e,j[0|a]):j[a]=g+":"+j[a])}),d.apply(null,j),h}return d.apply(null,arguments),h}};return e instanceof HTMLInputElement?(h.bind=function(a,b){return i(a,e,"value",b),h},h.format=function(a){return d(e,a),h}):h.bind=function(a,b,c){return i(a,e,b,c),h},h.create=o(b.create,[0]),h.var=o(b.var,[0]),h.const=o(b.const,[0]),h.createView=o(b.createView,["0",1]),h.bind=o(b.bind,["0","1"]),h.delay=o(b.delay,["0","1"]),h.watch=function(a){var c=a,d=!1,f=!1;("html"==a||"text"==a)&&(a="innerHTML",f=d=!0),"*"==a.charAt(0)&&(a=a.substring(1),f=d=!0),"innerHTML"===a&&(e instanceof HTMLStyleElement||e instanceof HTMLScriptElement)&&(d=!1);var g=f?e[a]:e.getAttribute(a)||"";var o=(g.toString().match(/\{\{[A-Za-z0-9\-_#]+(\|[^}]+(\}[^}]+)?)*\}\}/g)||[]).map(function(a){var b=a.substring(2,a.length-2).split("|"),c=b[0];return b[0]="",[c.toLowerCase(),b.join("|").substring(1),j(a)]});o=o.filter(function(a){return k(e,a[0])}).filter(n);var p=o.map(function(a){return new RegExp(a[2],"g")}),q=function(){var h=g.toString();d?b.from(e.childNodes).for(function(a){a instanceof HTMLElement?(b.from(a).watch(c),b.from(a.attributes).for(function(c){p.some(function(a){return c.value.match(a)})&&b.from(a).watch(c.name)})):a instanceof Text&&(h=a.data,""!==h.trim()&&(p.forEach(function(a,d){var f=k(e,o[d][0]);""!==o[d][1]&&(f=l()+l(),b.createView(o[d][0],f,new Function(o[d][0],"return "+m(o[d][1]))));var g="*innerHTML"==c||"html"==c?"bind-to=\"innerHTML\"":"";h=h.replace(a,"<v bind=\""+f+"\""+g+"></v>")}),a.parentNode.replaceChild(new DOMParser().parseFromString("<v>"+h+"</v>","text/html").childNodes[0].childNodes[1].childNodes[0],a)))}):(p.forEach(function(a,c){if(""!==o[c][1]){var d=new Function(o[c][0],"return "+o[c][1]);h=h.replace(a,d(b(e).get(o[c][0])))}else h=h.replace(a,b(e).get(o[c][0]))}),f?e[a]=h:e.setAttribute(a,h))};o.forEach(function(a){d||h.bind(a[0],q)}),q()},h.get=function(a){return b.get(k(e,a))},h.update=function(a){return b.update(k(e,a)),h},h.search=function(a){return b.search(a,e)},h.from=function(a){var c=a.substring(1),d=a[0];return"*"==d?b.from(e.querySelectorAll(c)):"$"==d?b.from(e.querySelector(c)):"&"==d?b.from(b.search(c,e)):"@"==d?b.from(b.search(c,e).map(b.get)):void 0},h.set=function(a,c){return b.set(k(e,a),c),h},h}return Array.isArray(e)?(h.do=function(a){return e.map(a)},h.for=function(a){return e.forEach(a)}):(h.for=function(a){for(var b=0;b<e.length;b++)a(e[b],b)},h.do=function(a){for(var b=[],c=0;c<e.length;c++)b.push(a(e[c],c));return b}),h.filter=function(a){h._arrayFix();for(var b=0;b<e.length;b++)a(e[b])||(e.splice(b,1),b--);return h},h.toArray=function(){return e=c(e)},h._arrayFix=function(){return!Array.isArray(e)&&h.toArray()},h.transform=function(a){h._arrayFix();for(var b=0;b<e.length;b++)e[b]=a(e[b],b);return h},h.transpose=function(){var b=a()[0];return function(a,b){return e[b].map(function(a,b){return e.map(function(a){return a[b]})})}(e,b)},h.sum=function(){return h._arrayFix(),e.concat([0]).reduce(function(a,b){return parseFloat(b)+parseFloat(a)||0})},h.ffor=function(a,b){for(var c=0;c<e.length;c++)b(e[c])&&a(e[c],c)},h.table=function(b){function c(a,b){return"<"+b+">"+a+"</"+b+">"}b||(b={}),"undefined"==typeof b.fill&&(b.fill=""),"undefined"==typeof b.head&&(b.head=[]);for(var d=a()[1],f=0;f<e.length;f++)for(;e[f].length<d;)e[f].push("");var g=c(e.map(function(a){return c(a.map(function(a){return c(a||b.fill,"td")}).join(""),"tr")}).join(""),"tbody"),h="";return b.head.length&&(h=c(c(b.head.map(function(a){return c(a,"th")}).join(""),"tr"),"thead")),c(h+g,"table")},h.fdo=function(a,b){for(var c,d=[],f=0;f<e.length;f++)c=b(e[f])?a(e[f],f):null,void 0!==c&&null!==c&&d.push(c);return d},h},b.templates={getInt:function(a){return parseInt(a.val)||0},getPosInt:function(a){var b=parseInt(a.val);return 0>b?-b:b||0},getFloat:function(a){return parseFloat(a.val)||0},getAny:function(a){return"undefined"==typeof a.val?"":a.val},setInt:function(a,b){return a.val=parseInt(b)},setFloat:function(a,b){return a.val=parseFloat(b)},setAny:function(a,b){return a.val=b}},b._CV=function(a,c,d){var e={val:"undefined"==typeof a?"":a},f=c?c:b.templates.getAny,g=d?d:b.templates.setAny;return e.set=function(a){return g(e,a)},e.get=function(){return f(e)},e},b.search=function(a,c){a=(a||"").toLowerCase();var d=function(a){return Object.keys(w).filter(function(b){return b.match(a)})};if(c){if("string"==typeof c)return b.search(a,document.querySelector(r(c)));var e=b.closest(c);if(e){var f=[];return b.from(e.querySelectorAll("["+B+"]")).for(function(b){f.push.apply(f,d(b.getAttribute(B)+":"+a)||[])}),f.push.apply(f,d(e.getAttribute(B)+":"+a)||[]),f}}return d(a)},b.const=function(a,c){return b.create(a,function(){return c})},b.pvar=function(a,c){if(!w[a]){var d="bb_"+a;localStorage[d]||(localStorage[d]=c);var e=function(a){localStorage[d]=a},f=function(){return localStorage[d]};return b.create(a,f,e),b}},b.var=function(c,d,e,f){var g=new b._CV(d,e,f);return b.create(c,g.get,g.set),b},b.range=function(a,b){return c(Array(b-a+1).keys()).map(function(b){return b+a})},b.all=function(a){a=r(a),p(a),q(a),o(a),n(a),t(a),u(a),v(a),s(a)}}createBasylBinder($$),addEventListener("load",function(){return $$.all()});
